# -*- coding: utf-8 -*-
"""ai_app.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1gD95flbXZSYV9Wyz77CV8m9gAqLZF89W

ğŸ§© 1. í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜
"""

pip install streamlit openai python-docx

"""ğŸ§  2. ê¸°ì¤€ ìë£Œ íŒŒì¼ ë§Œë“¤ê¸° (standard.txt)"""

# ê¸°ì¤€ ì˜ˆì‹œ ì‘ì„±
standard_text = """1. í•™ìƒì€ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë‹¤ì–‘í•œ ì „ëµì„ íƒìƒ‰í•˜ê³  ì ìš©í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
2. í•™ìŠµìëŠ” í† ì˜ì™€ í˜‘ë ¥ì„ í†µí•´ ìì‹ ì˜ ìƒê°ì„ ì •ë¦¬í•˜ê³  í‘œí˜„í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
3. ìˆ˜ì—…ì€ í•™ìƒ ì°¸ì—¬ ì¤‘ì‹¬ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ì•¼ í•˜ë©°, í‰ê°€ ë°©ë²•ì€ í˜•ì„±í‰ê°€ë¥¼ í¬í•¨í•´ì•¼ í•œë‹¤."""

# íŒŒì¼ë¡œ ì €ì¥
with open("standard.txt", "w", encoding="utf-8") as f:
    f.write(standard_text)

"""ğŸ“„ 3. app.py íŒŒì¼ë¡œ Streamlit ì½”ë“œ ì €ì¥í•˜ê¸°"""

app_code = """
import streamlit as st
import openai

# í™˜ê²½ë³€ìˆ˜ ë˜ëŠ” ì‚¬ìš©ì ì…ë ¥ìœ¼ë¡œ API í‚¤ ì„¤ì •
openai.api_key = st.text_input("ğŸ”‘ OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”", type="password")

st.set_page_config(page_title="AI ê¸°ì¤€ ë¹„êµ í”¼ë“œë°± ì•±")
st.title("ğŸ“š êµìˆ˜í•™ìŠµ ê³„íšì„œ ê¸°ì¤€ ë¹„êµ í”¼ë“œë°±")

# ê¸°ì¤€ íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°
try:
    with open("standard.txt", "r", encoding="utf-8") as f:
        standard_text = f.read()
except:
    st.error("ê¸°ì¤€ ìë£Œ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ì—…ë¡œë“œí•˜ê±°ë‚˜ ìƒì„±í•´ ì£¼ì„¸ìš”.")
    standard_text = ""

# ì‚¬ìš©ì ì…ë ¥
user_input = st.text_area("ğŸ“ êµìˆ˜í•™ìŠµ ë° í‰ê°€ ê³„íšì„œë¥¼ ì…ë ¥í•˜ì„¸ìš”", height=200)

# í”¼ë“œë°± ë²„íŠ¼
if st.button("ğŸ¤– í”¼ë“œë°± ë°›ê¸°"):
    if not openai.api_key:
        st.warning("API í‚¤ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.")
    elif not user_input.strip():
        st.warning("ê³„íšì„œë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.")
    else:
        with st.spinner("AIê°€ í”¼ë“œë°±ì„ ì‘ì„± ì¤‘ì…ë‹ˆë‹¤..."):
            prompt = f\"""[ê¸°ì¤€ ìë£Œ]
{standard_text}

[ì‚¬ìš©ì ì…ë ¥]
{user_input}

ìœ„ ê¸°ì¤€ ìë£Œì— ë¹„ì¶”ì–´ ì‚¬ìš©ì ì…ë ¥ì´ ê¸°ì¤€ì„ ì–¼ë§ˆë‚˜ ì¶©ì¡±í•˜ëŠ”ì§€ í‰ê°€í•˜ê³  ë¶€ì¡±í•œ ë¶€ë¶„ì´ ìˆë‹¤ë©´ í”¼ë“œë°±ì„ ì œê³µí•´ ì£¼ì„¸ìš”.\"""

            try:
                response = openai.ChatCompletion.create(
                    model="gpt-4",
                    messages=[
                        {"role": "user", "content": prompt}
                    ]
                )
                feedback = response["choices"][0]["message"]["content"]
                st.subheader("ğŸ“Œ AI í”¼ë“œë°± ê²°ê³¼")
                st.write(feedback)
            except Exception as e:
                st.error(f"ì˜¤ë¥˜ ë°œìƒ: {e}")
"""

with open("app.py", "w", encoding="utf-8") as f:
    f.write(app_code)

"""ğŸš€ 4. Streamlit ì•± ì‹¤í–‰ ëª…ë ¹

ì´ ì…€ì€ í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰í•´ì•¼ ì‘ë™í•©ë‹ˆë‹¤.
ì½”ë©ì—ì„œëŠ” ì•ˆë˜ë¯€ë¡œ ë¡œì»¬ í™˜ê²½ì´ë‚˜ Streamlit Community Cloud ë°°í¬ì—ì„œ ì‹¤í–‰í•˜ì„¸ìš”.

âœ… 1ë‹¨ê³„: GitHub ê³„ì • ì¤€ë¹„

ğŸ§‘â€ğŸ’» í•™ìƒ ì•ˆë‚´ìš©
GitHubëŠ” ì†ŒìŠ¤ì½”ë“œë¥¼ ì €ì¥í•˜ê³  ê³µìœ í•˜ëŠ” ì˜¨ë¼ì¸ ê³µê°„ì…ë‹ˆë‹¤.

Streamlitì€ GitHubì— ìˆëŠ” ì½”ë“œë¥¼ ë¶ˆëŸ¬ì™€ ì›¹ì•±ìœ¼ë¡œ ë°”ê¿”ì¤ë‹ˆë‹¤.

ì´ë¯¸ ê³„ì •ì´ ìˆë‹¤ë©´ ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ì„¸ìš”.

ğŸ“Œ í•´ì•¼ í•  ì¼:
https://github.com ì— ì ‘ì†í•©ë‹ˆë‹¤.

Sign upì„ í´ë¦­í•˜ê³  ê³„ì •ì„ ë§Œë“­ë‹ˆë‹¤.

ì´ë©”ì¼ ì¸ì¦ê¹Œì§€ ë§ˆì¹˜ë©´ ì™„ë£Œì…ë‹ˆë‹¤.

âœ… 2ë‹¨ê³„: GitHubì— ìƒˆ ì €ì¥ì†Œ(Repo) ë§Œë“¤ê¸°

ğŸ§‘â€ğŸ« ìˆ˜ì—…ì—ì„œ ì„¤ëª…í•  ë‚´ìš©
ì €ì¥ì†Œ(Repository)ëŠ” ì½”ë“œì™€ íŒŒì¼ë“¤ì„ ëª¨ì•„ë‘ëŠ” í´ë”ì…ë‹ˆë‹¤.

ìš°ë¦¬ê°€ ë§Œë“  app.pyì™€ standard.txtë¥¼ ì—¬ê¸°ì— ì—…ë¡œë“œí•  ê±°ì˜ˆìš”.

ğŸ“Œ í•´ì•¼ í•  ì¼:
ë¡œê·¸ì¸í•œ ìƒíƒœì—ì„œ ì˜¤ë¥¸ìª½ ìƒë‹¨ â• í´ë¦­ â†’ New repository ì„ íƒ

ì´ë¦„: ì˜ˆ) lesson-feedback-app

ì„¤ëª…(optional): ìˆ˜ì—…ìš© Streamlit AI í”¼ë“œë°± ì•±

ê³µê°œ(â˜‘ Public) ì„ íƒ

Create repository í´ë¦­

âœ… 3ë‹¨ê³„: ë§Œë“  ì½”ë“œ ì—…ë¡œë“œí•˜ê¸°

ë°©ë²• 1: GitHub ì›¹ì‚¬ì´íŠ¸ì—ì„œ ì§ì ‘ ì˜¬ë¦¬ê¸°
ğŸ“Œ í•´ì•¼ í•  ì¼:
ì €ì¥ì†Œì— ë“¤ì–´ê°€ì„œ Add file â†’ Upload files í´ë¦­

app.py ì™€ standard.txt íŒŒì¼ì„ ì—…ë¡œë“œ

Commit changes ë²„íŠ¼ í´ë¦­

ğŸ’¡ ì½”ë©ì—ì„œ ë§Œë“  íŒŒì¼ì€ ì¢Œì¸¡ ì‚¬ì´ë“œë°” â†’ íŒŒì¼íƒ­ì—ì„œ ë‹¤ìš´ë¡œë“œ í›„ ì—…ë¡œë“œí•˜ë©´ ë©ë‹ˆë‹¤.

âœ… 4ë‹¨ê³„: Streamlit Cloudì— ë¡œê·¸ì¸ & ì•± ë°°í¬

ğŸ§‘â€ğŸ’» í•™ìƒ ì•ˆë‚´ìš©
ì´ì œ GitHubì— ì˜¬ë¦° ì½”ë“œë¥¼ Streamlitì´ ì½ì–´ì™€ì„œ ì›¹ì•±ìœ¼ë¡œ ë§Œë“¤ì–´ì¤„ ê±°ì˜ˆìš”.

ğŸ“Œ í•´ì•¼ í•  ì¼:
https://streamlit.io ì ‘ì† â†’ Sign in

GitHub ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ (ì—°ë™ í—ˆìš©)

Deploy an app í´ë¦­

ë‹¤ìŒ ì •ë³´ ì…ë ¥:

Repository: ë³¸ì¸ ì‚¬ìš©ìëª…/lesson-feedback-app

Branch: main

File: app.py

Deploy í´ë¦­

â± ì•½ 1~2ë¶„ í›„ ì›¹í˜ì´ì§€ê°€ ìƒì„±ë©ë‹ˆë‹¤.

âœ… 5ë‹¨ê³„: ì•± ì ‘ì† í™•ì¸

URLì€ ë³´í†µ ë‹¤ìŒê³¼ ê°™ì´ ìƒê²¼ìŠµë‹ˆë‹¤.
https://<your-username>-lesson-feedback-app.streamlit.app

ì•±ì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©´,

OpenAI API í‚¤ ì…ë ¥ì°½

ê³„íšì„œ ì…ë ¥ì°½

í”¼ë“œë°± ê²°ê³¼ ì¶œë ¥

ëª¨ë‘ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.
"""

!pip install streamlit openai python-docx

# ê¸°ì¤€ ì˜ˆì‹œ ì‘ì„±
standard_text = """1. í•™ìƒì€ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë‹¤ì–‘í•œ ì „ëµì„ íƒìƒ‰í•˜ê³  ì ìš©í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
2. í•™ìŠµìëŠ” í† ì˜ì™€ í˜‘ë ¥ì„ í†µí•´ ìì‹ ì˜ ìƒê°ì„ ì •ë¦¬í•˜ê³  í‘œí˜„í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
3. ìˆ˜ì—…ì€ í•™ìƒ ì°¸ì—¬ ì¤‘ì‹¬ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ì•¼ í•˜ë©°, í‰ê°€ ë°©ë²•ì€ í˜•ì„±í‰ê°€ë¥¼ í¬í•¨í•´ì•¼ í•œë‹¤."""

# íŒŒì¼ë¡œ ì €ì¥
with open("standard.txt", "w", encoding="utf-8") as f:
    f.write(standard_text)

app_code = """
import streamlit as st
import openai

# í™˜ê²½ë³€ìˆ˜ ë˜ëŠ” ì‚¬ìš©ì ì…ë ¥ìœ¼ë¡œ API í‚¤ ì„¤ì •
openai.api_key = st.text_input("ğŸ”‘ OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”", type="password")

st.set_page_config(page_title="AI ê¸°ì¤€ ë¹„êµ í”¼ë“œë°± ì•±")
st.title("ğŸ“š êµìˆ˜í•™ìŠµ ê³„íšì„œ ê¸°ì¤€ ë¹„êµ í”¼ë“œë°±")

# ê¸°ì¤€ íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°
try:
    with open("standard.txt", "r", encoding="utf-8") as f:
        standard_text = f.read()
except:
    st.error("ê¸°ì¤€ ìë£Œ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ì—…ë¡œë“œí•˜ê±°ë‚˜ ìƒì„±í•´ ì£¼ì„¸ìš”.")
    standard_text = ""

# ì‚¬ìš©ì ì…ë ¥
user_input = st.text_area("ğŸ“ êµìˆ˜í•™ìŠµ ë° í‰ê°€ ê³„íšì„œë¥¼ ì…ë ¥í•˜ì„¸ìš”", height=200)

# í”¼ë“œë°± ë²„íŠ¼
if st.button("ğŸ¤– í”¼ë“œë°± ë°›ê¸°"):
    if not openai.api_key:
        st.warning("API í‚¤ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.")
    elif not user_input.strip():
        st.warning("ê³„íšì„œë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.")
    else:
        with st.spinner("AIê°€ í”¼ë“œë°±ì„ ì‘ì„± ì¤‘ì…ë‹ˆë‹¤..."):
            prompt = f\"""[ê¸°ì¤€ ìë£Œ]
{standard_text}

[ì‚¬ìš©ì ì…ë ¥]
{user_input}

ìœ„ ê¸°ì¤€ ìë£Œì— ë¹„ì¶”ì–´ ì‚¬ìš©ì ì…ë ¥ì´ ê¸°ì¤€ì„ ì–¼ë§ˆë‚˜ ì¶©ì¡±í•˜ëŠ”ì§€ í‰ê°€í•˜ê³  ë¶€ì¡±í•œ ë¶€ë¶„ì´ ìˆë‹¤ë©´ í”¼ë“œë°±ì„ ì œê³µí•´ ì£¼ì„¸ìš”.\"""

            try:
                response = openai.ChatCompletion.create(
                    model="gpt-4",
                    messages=[
                        {"role": "user", "content": prompt}
                    ]
                )
                feedback = response["choices"][0]["message"]["content"]
                st.subheader("ğŸ“Œ AI í”¼ë“œë°± ê²°ê³¼")
                st.write(feedback)
            except Exception as e:
                st.error(f"ì˜¤ë¥˜ ë°œìƒ: {e}")
"""

with open("app.py", "w", encoding="utf-8") as f:
    f.write(app_code)
